[gd_scene load_steps=20 format=3 uid="uid://vg72e433ggrx"]

[ext_resource type="Material" uid="uid://c5n8hh7lc1h4b" path="res://materials/base_material_3d.tres" id="2_pu3yx"]
[ext_resource type="Script" uid="uid://co3y5aldsk5jh" path="res://scripts/level.gd" id="3_c16ls"]
[ext_resource type="Texture2D" uid="uid://b0r6xam3j6ui2" path="res://textures/background_beginning.jpg" id="4_c1pb6"]
[ext_resource type="PackedScene" uid="uid://xqds4eqa4fys" path="res://scenes/section.tscn" id="4_gubc5"]
[ext_resource type="PackedScene" uid="uid://durrtmu3i450r" path="res://scenes/player.tscn" id="4_pu3yx"]
[ext_resource type="Script" uid="uid://cldevqp1odjtl" path="res://scripts/hud.gd" id="7_c16ls"]
[ext_resource type="ArrayMesh" uid="uid://dkew5403qhabh" path="res://meshes/gestein_v001.obj" id="7_mngbo"]
[ext_resource type="PackedScene" path="res://scenes/lava.tscn" id="7_r6p65"]
[ext_resource type="PackedScene" uid="uid://bip40vv31g12d" path="res://scenes/inventory/inv_ui.tscn" id="9_c1pb6"]
[ext_resource type="Script" uid="uid://cau06s0ctjwx8" path="res://scripts/upgrades.gd" id="10_6wevv"]
[ext_resource type="Script" uid="uid://dhv52dohn5s4r" path="res://scripts/death_screen.gd" id="10_e1cbu"]
[ext_resource type="PackedScene" uid="uid://d0ykw70micab6" path="res://scenes/boss.tscn" id="11_e1cbu"]
[ext_resource type="Script" uid="uid://dx1hxd4wnymb1" path="res://scripts/boss_dialog_ui.gd" id="12_mngbo"]
[ext_resource type="PackedScene" path="res://scenes/cheats.tscn" id="13_4w45t"]

[sub_resource type="QuadMesh" id="QuadMesh_c16ls"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6wevv"]
albedo_texture = ExtResource("4_c1pb6")

[sub_resource type="TorusMesh" id="TorusMesh_o3jxj"]

[sub_resource type="BoxShape3D" id="BoxShape3D_mngbo"]
size = Vector3(1, 24.5298, 11.689)

[sub_resource type="Theme" id="Theme_18nlu"]

[node name="Node3D" type="Node3D"]

[node name="CharacterBody3D" parent="." instance=ExtResource("4_pu3yx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -0.33)
speed_vertical = 1.5
speed_horizontal = 4.0

[node name="Level" type="Node3D" parent="." node_paths=PackedStringArray("level_wrapper", "player")]
script = ExtResource("3_c16ls")
section = ExtResource("4_gubc5")
level_wrapper = NodePath(".")
player = NodePath("../CharacterBody3D")
boss = ExtResource("11_e1cbu")
sectionHeight = 25.0
preloadSectionsCount = 2

[node name="StartSection" type="Node3D" parent="Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)

[node name="Background" type="MeshInstance3D" parent="Level/StartSection"]
transform = Transform3D(25, 0, 0, 0, 25, 0, 0, 0, 1, -15.8629, 0, -3.00963)
mesh = SubResource("QuadMesh_c16ls")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_6wevv")

[node name="Base" type="MeshInstance3D" parent="Level/StartSection"]
transform = Transform3D(1, 0, 0, 0, 5, 0, 0, 0, 1, 0.0526396, 13.6304, -1.26619)
material_override = ExtResource("2_pu3yx")
mesh = SubResource("TorusMesh_o3jxj")
skeleton = NodePath("../../..")

[node name="Lava" parent="Level/StartSection" instance=ExtResource("7_r6p65")]
transform = Transform3D(0.538622, 0, 0, 0, 4.32167, 0, 0, 0, 1, -19.2295, 0.180141, -2.69743)

[node name="Lava2" parent="Level/StartSection" instance=ExtResource("7_r6p65")]
transform = Transform3D(2.45308, 0, 0, 0, 1.62324, 0, 0, 0, 1, -20.4469, -3.0248, -2.69743)

[node name="Section" parent="Level" instance=ExtResource("4_gubc5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -35, 0)

[node name="StaticBody3D2" type="StaticBody3D" parent="Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.55464, -10.9413, 2.7562)

[node name="GesteinV002" type="MeshInstance3D" parent="Level/StaticBody3D2"]
transform = Transform3D(0.92432, 0, 0, 0, 0.0514902, -1.91631, 0, 1.20637, 0.0817914, 2.14848, 1.17493, -5.26057)
mesh = ExtResource("7_mngbo")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Level/StaticBody3D2"]
shape = SubResource("BoxShape3D_mngbo")

[node name="StaticBody3D" type="StaticBody3D" parent="Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -11.0435, 0)

[node name="CollisionShape3D2" type="CollisionShape3D" parent="Level/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -26.0818, 0.102249, 2.7562)
shape = SubResource("BoxShape3D_mngbo")

[node name="GesteinV001" type="MeshInstance3D" parent="Level/StaticBody3D"]
transform = Transform3D(0.92432, 0, 0, 0, 0.0514902, -1.91631, 0, 1.20637, 0.0817914, -29.1315, 1.27718, -0.635346)
mesh = ExtResource("7_mngbo")
skeleton = NodePath("../..")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.94702, 0.320556, -0.0199303, -0.0267635, 0.140602, 0.989705, 0.320058, -0.936736, 0.141732, -6.47082, 1.04463, 15.1856)

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
theme = SubResource("Theme_18nlu")

[node name="HUD" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("7_c16ls")

[node name="HUDContainer" type="VBoxContainer" parent="UI/HUD"]
layout_mode = 2

[node name="CurrentStageLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="DepthLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="MaxDepthLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="MoneyLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="HealthBarLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2
text = "Health:"

[node name="HealthBar" type="ProgressBar" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="PressureHeadroomLabel" type="Label" parent="UI/HUD/HUDContainer"]
layout_mode = 2
text = "Pressure Headroom:"

[node name="PressureHeadroomBar" type="ProgressBar" parent="UI/HUD/HUDContainer"]
layout_mode = 2

[node name="Upgrades" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_left = 294.0
offset_top = 137.0
offset_right = 888.0
offset_bottom = 485.0
script = ExtResource("10_6wevv")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/Upgrades"]
layout_mode = 2

[node name="Label" type="Label" parent="UI/Upgrades/VBoxContainer"]
layout_mode = 2
text = "Upgrades"
horizontal_alignment = 1
vertical_alignment = 1

[node name="GridContainer" type="GridContainer" parent="UI/Upgrades/VBoxContainer"]
layout_mode = 2

[node name="inv_ui" parent="UI" instance=ExtResource("9_c1pb6")]
layout_mode = 0
offset_left = 450.0
offset_top = 82.0
offset_right = 729.0
offset_bottom = 247.0

[node name="DeathScreen" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_left = 295.0
offset_top = 237.0
offset_right = 888.0
offset_bottom = 351.0
script = ExtResource("10_e1cbu")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/DeathScreen"]
layout_mode = 2

[node name="Label" type="Label" parent="UI/DeathScreen/VBoxContainer"]
layout_mode = 2
text = "Oh nooo, you died!
Anyways... Lets keep going - we don't have all day!"

[node name="Button" type="Button" parent="UI/DeathScreen/VBoxContainer"]
layout_mode = 2
text = "Respawn
"

[node name="BossDialog" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_left = 295.0
offset_top = 237.0
offset_right = 888.0
offset_bottom = 351.0
script = ExtResource("12_mngbo")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/BossDialog"]
layout_mode = 2

[node name="NameLabel" type="Label" parent="UI/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Blobfish:"

[node name="MessageLabel" type="Label" parent="UI/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Oh nooo, you died!
Anyways... Lets keep going - we don't have all day!"

[node name="ContinueButton" type="Button" parent="UI/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Continue"

[node name="Cheats" parent="UI" instance=ExtResource("13_4w45t")]
visible = false
layout_mode = 0
offset_left = 434.0
offset_top = 82.0
offset_right = 748.0
offset_bottom = 258.0
