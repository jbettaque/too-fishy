[gd_scene load_steps=31 format=3 uid="uid://vg72e433ggrx"]

[ext_resource type="Material" uid="uid://c5n8hh7lc1h4b" path="res://materials/base_material_3d.tres" id="2_pu3yx"]
[ext_resource type="Script" uid="uid://co3y5aldsk5jh" path="res://scripts/level.gd" id="3_c16ls"]
[ext_resource type="Texture2D" uid="uid://b0r6xam3j6ui2" path="res://textures/backgrounds/background_beginning.jpg" id="4_c1pb6"]
[ext_resource type="PackedScene" uid="uid://xqds4eqa4fys" path="res://scenes/section.tscn" id="4_gubc5"]
[ext_resource type="PackedScene" uid="uid://durrtmu3i450r" path="res://scenes/player.tscn" id="4_pu3yx"]
[ext_resource type="PackedScene" uid="uid://b3j6kki1bc2xs" path="res://scenes/boss_section.tscn" id="5_si52b"]
[ext_resource type="Script" uid="uid://cldevqp1odjtl" path="res://scripts/hud.gd" id="7_c16ls"]
[ext_resource type="PackedScene" path="res://scenes/lava.tscn" id="7_r6p65"]
[ext_resource type="StyleBox" uid="uid://bx8skthds5uiu" path="res://scenes/inventory/main_scene.tres" id="9_6u1mn"]
[ext_resource type="Material" uid="uid://bq68gffx25aw4" path="res://materials/backgrounds/bg_first.tres" id="9_7nt27"]
[ext_resource type="Material" uid="uid://dohoucrjnnkwp" path="res://materials/backgrounds/bg_afterfirst.tres" id="9_bcnxi"]
[ext_resource type="PackedScene" uid="uid://bip40vv31g12d" path="res://scenes/inventory/inv_ui.tscn" id="9_c1pb6"]
[ext_resource type="Texture2D" uid="uid://criy5nis30pph" path="res://textures/UI_element_background.png" id="10_01n6w"]
[ext_resource type="Script" uid="uid://cau06s0ctjwx8" path="res://scripts/upgrades.gd" id="10_6wevv"]
[ext_resource type="Script" uid="uid://dhv52dohn5s4r" path="res://scripts/death_screen.gd" id="10_e1cbu"]
[ext_resource type="PackedScene" uid="uid://d0ykw70micab6" path="res://scenes/boss.tscn" id="11_e1cbu"]
[ext_resource type="Script" uid="uid://dx1hxd4wnymb1" path="res://scripts/boss_dialog_ui.gd" id="12_mngbo"]
[ext_resource type="PackedScene" uid="uid://b87oo8x46lj3r" path="res://scenes/cheats.tscn" id="13_4w45t"]
[ext_resource type="Script" path="res://scripts/fps_counter.gd" id="14_r6p65"]
[ext_resource type="PackedScene" uid="uid://b35mxcc3d74di" path="res://scenes/WaterPlane.tscn" id="20_k6f3i"]
[ext_resource type="Texture2D" uid="uid://bygn7y3qpn8xs" path="res://Shaders/AllSkyFree_Sky_EpicBlueSunset_Equirect.png" id="21_xdqt8"]

[sub_resource type="QuadMesh" id="QuadMesh_c16ls"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6wevv"]
albedo_texture = ExtResource("4_c1pb6")

[sub_resource type="TorusMesh" id="TorusMesh_o3jxj"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_6u1mn"]
bg_color = Color(0, 0.360784, 0.831373, 1)
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_radius_bottom_right = 5
corner_radius_bottom_left = 5

[sub_resource type="Theme" id="Theme_18nlu"]
Button/styles/normal = null
PanelContainer/styles/panel = ExtResource("9_6u1mn")
ProgressBar/styles/fill = SubResource("StyleBoxFlat_6u1mn")

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_01n6w"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_k6f3i"]
panorama = ExtResource("21_xdqt8")

[sub_resource type="Sky" id="Sky_xdqt8"]
sky_material = SubResource("PanoramaSkyMaterial_k6f3i")

[sub_resource type="Environment" id="Environment_k6f3i"]
background_mode = 2
sky = SubResource("Sky_xdqt8")

[node name="Node3D" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.94702, 0.320556, -0.0199305, -0.0267635, 0.140602, 0.989704, 0.320058, -0.936736, 0.141732, -6.47082, 1.04463, 15.1856)

[node name="CharacterBody3D" parent="." instance=ExtResource("4_pu3yx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -0.33)
speed_vertical = 1.5
speed_horizontal = 1.5

[node name="Level" type="Node3D" parent="." node_paths=PackedStringArray("level_wrapper", "player")]
script = ExtResource("3_c16ls")
section = ExtResource("4_gubc5")
level_wrapper = NodePath(".")
player = NodePath("../CharacterBody3D")
boss = ExtResource("11_e1cbu")
boss_section = ExtResource("5_si52b")
sectionHeight = 25.0
preloadSectionsCount = 2

[node name="StartSection" type="Node3D" parent="Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)
visible = false

[node name="Background" type="MeshInstance3D" parent="Level/StartSection"]
transform = Transform3D(25, 0, 0, 0, 25, 0, 0, 0, 1, -15.8629, 0, -3.00963)
mesh = SubResource("QuadMesh_c16ls")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_6wevv")

[node name="Base" type="MeshInstance3D" parent="Level/StartSection"]
transform = Transform3D(1, 0, 0, 0, 5, 0, 0, 0, 1, 0.0526396, 13.6304, -1.26619)
material_override = ExtResource("2_pu3yx")
mesh = SubResource("TorusMesh_o3jxj")
skeleton = NodePath("../../..")

[node name="Lava" parent="Level/StartSection" instance=ExtResource("7_r6p65")]
transform = Transform3D(0.538622, 0, 0, 0, 4.32167, 0, 0, 0, 1, -19.2295, 0.180141, -2.69743)

[node name="Lava2" parent="Level/StartSection" instance=ExtResource("7_r6p65")]
transform = Transform3D(2.45308, 0, 0, 0, 1.62324, 0, 0, 0, 1, -20.4469, -3.0248, -2.69743)

[node name="FirstSection" parent="Level" instance=ExtResource("4_gubc5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)
background_mat = ExtResource("9_7nt27")

[node name="SecondSection" parent="Level" instance=ExtResource("4_gubc5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -35, 0)
background_mat = ExtResource("9_bcnxi")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("Theme_18nlu")

[node name="inv_ui" parent="UI" instance=ExtResource("9_c1pb6")]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -227.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 156.0
grow_horizontal = 0

[node name="CenterContainer" type="CenterContainer" parent="UI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="BossDialog" type="PanelContainer" parent="UI/CenterContainer"]
layout_mode = 2
script = ExtResource("12_mngbo")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/CenterContainer/BossDialog"]
layout_mode = 2

[node name="NameLabel" type="Label" parent="UI/CenterContainer/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Blobfish:"

[node name="MessageLabel" type="Label" parent="UI/CenterContainer/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Oh nooo, you died!
Anyways... Lets keep going - we don't have all day!"

[node name="ContinueButton" type="Button" parent="UI/CenterContainer/BossDialog/VBoxContainer"]
layout_mode = 2
text = "Continue"

[node name="Upgrades" type="PanelContainer" parent="UI/CenterContainer"]
layout_mode = 2
script = ExtResource("10_6wevv")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/CenterContainer/Upgrades"]
layout_mode = 2

[node name="Label" type="Label" parent="UI/CenterContainer/Upgrades/VBoxContainer"]
layout_mode = 2
text = "Upgrades"
horizontal_alignment = 1
vertical_alignment = 1

[node name="GridContainer" type="GridContainer" parent="UI/CenterContainer/Upgrades/VBoxContainer"]
layout_mode = 2

[node name="DeathScreen" type="PanelContainer" parent="UI/CenterContainer"]
layout_mode = 2
script = ExtResource("10_e1cbu")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/CenterContainer/DeathScreen"]
layout_mode = 2

[node name="Label" type="Label" parent="UI/CenterContainer/DeathScreen/VBoxContainer"]
layout_mode = 2
text = "Oh nooo, you died!
Anyways... Lets keep going - we don't have all day!"

[node name="Button" type="Button" parent="UI/CenterContainer/DeathScreen/VBoxContainer"]
layout_mode = 2
text = "Respawn
"

[node name="HUD" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
theme_override_styles/panel = SubResource("StyleBoxEmpty_01n6w")
script = ExtResource("7_c16ls")

[node name="TextureRect" type="TextureRect" parent="UI/HUD"]
layout_mode = 2
texture = ExtResource("10_01n6w")
expand_mode = 4

[node name="MarginContainer" type="MarginContainer" parent="UI/HUD"]
layout_mode = 2
theme_override_constants/margin_left = 25
theme_override_constants/margin_top = 25
theme_override_constants/margin_right = 25
theme_override_constants/margin_bottom = 25

[node name="HUDContainer" type="VBoxContainer" parent="UI/HUD/MarginContainer"]
layout_mode = 2

[node name="CurrentStageLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="DepthLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="MaxDepthLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="MoneyLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="HealthBarLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2
text = "Health:"

[node name="HealthBar" type="ProgressBar" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="PressureHeadroomLabel" type="Label" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2
text = "Pressure Headroom:"

[node name="PressureHeadroomBar" type="ProgressBar" parent="UI/HUD/MarginContainer/HUDContainer"]
layout_mode = 2

[node name="Cheats" parent="UI" instance=ExtResource("13_4w45t")]
visible = false
layout_mode = 0
offset_left = 434.0
offset_top = 82.0
offset_right = 748.0
offset_bottom = 258.0

[node name="FPS Counter" type="Label" parent="UI"]
layout_mode = 2
offset_left = 220.0
offset_top = 10.0
offset_right = 409.0
offset_bottom = 33.0
text = "FPS"
script = ExtResource("14_r6p65")

[node name="Water" parent="." instance=ExtResource("20_k6f3i")]
transform = Transform3D(-43.6006, 0, 0, 0, 1, 0, 0, 0, 15.708, -14.3034, 0.00877783, 0.808204)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_k6f3i")
